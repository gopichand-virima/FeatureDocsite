---
id: discovery-setup-guide
title: IT Discovery Setup and Configuration Guide
category: Discovery
module: IT Discovery
difficulty: Beginner
readTime: 20 min
lastUpdated: 2024-11-28
author: Virima Technical Documentation Team
tags:
  - discovery
  - setup
  - configuration
  - scanning
relatedArticles:
  - cmdb-configuration-guide
  - credential-management
  - network-discovery
---

# IT Discovery Setup and Configuration Guide

Learn how to configure and optimize Virima's IT Discovery module to automatically discover, map, and monitor your entire IT infrastructure.

## Table of Contents

1. [Overview](#overview)
2. [Prerequisites](#prerequisites)
3. [Discovery Methods](#discovery-methods)
4. [Initial Configuration](#initial-configuration)
5. [Credential Management](#credential-management)
6. [Creating Discovery Jobs](#creating-discovery-jobs)
7. [Scheduling and Automation](#scheduling-and-automation)
8. [Monitoring Discovery](#monitoring-discovery)

## Overview

Virima IT Discovery automates the process of finding and cataloging IT assets across your network. It supports multiple discovery methods and protocols to ensure comprehensive coverage.

### What Discovery Can Find

- **Servers** - Physical and virtual servers (Windows, Linux, Unix, macOS)
- **Network Devices** - Routers, switches, firewalls, load balancers
- **Storage Systems** - SAN, NAS, storage arrays
- **Databases** - SQL Server, Oracle, MySQL, PostgreSQL, MongoDB
- **Applications** - Installed software and running services
- **Cloud Resources** - AWS, Azure, GCP instances and services
- **Containers** - Docker, Kubernetes clusters
- **End-User Devices** - Workstations, laptops, mobile devices

### Discovery Benefits

✅ **Automated Asset Inventory** - Eliminate manual tracking
✅ **Real-Time Updates** - Keep CMDB current automatically
✅ **Relationship Mapping** - Discover dependencies automatically
✅ **Compliance Visibility** - Track software licenses and versions
✅ **Security Posture** - Identify vulnerabilities and patches

## Prerequisites

### Network Requirements

**Firewall Rules:**
Allow the following ports from Discovery Appliance to target devices:

| Protocol | Port(s) | Purpose |
|----------|---------|---------|
| ICMP | - | Ping/availability check |
| SSH | 22 | Linux/Unix discovery |
| WMI | 135, 445 | Windows discovery |
| SNMP | 161 | Network device discovery |
| HTTP/HTTPS | 80, 443 | Cloud/API discovery |
| Database | Varies | Database discovery |

**Network Connectivity:**
- Discovery appliance must have network access to all target subnets
- No NAT translation between appliance and targets (if possible)
- Sufficient bandwidth for large-scale scans

### Credential Requirements

**Windows Systems:**
- Local administrator or domain admin account
- WMI access enabled
- Windows Firewall configured to allow WMI

**Linux/Unix Systems:**
- Root access or sudo privileges
- SSH enabled
- SSH key authentication (recommended)

**Network Devices:**
- SNMP community strings (v2c) or credentials (v3)
- Read access minimum, read-write for advanced features

**Cloud Platforms:**
- API access keys or service accounts
- Appropriate IAM permissions

## Discovery Methods

### 1. Agent-Based Discovery

**Description:** Lightweight agent installed on target systems

**Advantages:**
- Most accurate and detailed data
- Works behind firewalls
- Real-time updates
- Low network overhead

**Use Cases:**
- Endpoints behind NAT
- Mobile devices
- Remote offices with limited bandwidth

**Setup:**
```bash
# Install Virima agent on Linux
wget https://virima.example.com/agent/virima-agent-linux.sh
sudo bash virima-agent-linux.sh --server=virima.example.com --key=YOUR_KEY

# Install on Windows
# Download agent from Virima portal and run installer
VirimaAgent.exe /S /SERVER=virima.example.com /KEY=YOUR_KEY
```

### 2. Agentless Discovery

**Description:** Remote scanning without installing agents

**Supported Protocols:**
- **WMI** - Windows Management Instrumentation
- **SSH** - Secure Shell for Linux/Unix
- **SNMP** - Simple Network Management Protocol
- **API** - RESTful APIs for cloud and applications

**Advantages:**
- No agent deployment required
- Works with legacy systems
- Centralized control

**Use Cases:**
- Data center servers
- Network infrastructure
- Systems where agents cannot be installed

### 3. Cloud Discovery

**Description:** API-based discovery for cloud platforms

**Supported Platforms:**
- Amazon Web Services (AWS)
- Microsoft Azure
- Google Cloud Platform (GCP)
- VMware vCenter
- Hyper-V

**Discovery Scope:**
- Compute instances
- Storage volumes
- Networking components
- Managed services
- Cost and billing data

## Initial Configuration

### Step 1: Access Discovery Module

1. Log in to Virima as Administrator
2. Navigate to **Discovery → Configuration**
3. Review default settings

### Step 2: Configure Discovery Appliance

**For on-premises deployment:**

1. Navigate to **Admin → Discovery Appliances**
2. Click **Add Appliance**
3. Enter appliance details:
   - Name: `Discovery-Primary`
   - IP Address: `10.0.1.100`
   - Location: `Primary Data Center`
4. Download and deploy appliance VM
5. Verify connectivity

**Appliance System Requirements:**

| Environment Size | vCPU | RAM | Storage |
|-----------------|------|-----|---------|
| Small (<5K devices) | 4 | 8GB | 100GB |
| Medium (5K-20K) | 8 | 16GB | 200GB |
| Large (20K-50K) | 16 | 32GB | 500GB |
| Enterprise (50K+) | 32 | 64GB | 1TB |

### Step 3: Define Discovery Zones

Organize your network into logical zones:

1. Navigate to **Discovery → Zones**
2. Click **Create Zone**
3. Configure zone properties:

```yaml
Zone Example: Production Datacenter
  IP Ranges: 
    - 10.0.0.0/16
    - 172.16.0.0/24
  Excluded IPs:
    - 10.0.0.1-10.0.0.10 (Network infrastructure)
  Schedule:
    - Full Scan: Weekly (Sunday 2:00 AM)
    - Incremental: Daily (2:00 AM)
  Discovery Methods:
    - SNMP
    - WMI
    - SSH
```

## Credential Management

### Creating Credential Sets

1. Navigate to **Discovery → Credentials**
2. Click **Add Credential Set**
3. Fill in details:

**Windows Credentials Example:**
```
Name: Windows Domain Admin
Type: Windows (WMI)
Username: DOMAIN\svc_discovery
Password: ••••••••••
Domain: CORPORATE.LOCAL
Description: Domain admin for Windows discovery
```

**Linux Credentials Example:**
```
Name: Linux Root SSH
Type: Linux (SSH)
Username: root
Authentication: SSH Key
Private Key: [Upload key file]
Passphrase: ••••••••••
Description: Root access for Linux servers
```

**SNMP Credentials Example:**
```
Name: Network SNMP v3
Type: SNMP v3
Security Level: authPriv
Username: snmp_user
Auth Protocol: SHA
Auth Password: ••••••••••
Privacy Protocol: AES
Privacy Password: ••••••••••
Description: SNMPv3 for network devices
```

### Credential Best Practices

✅ **Use Service Accounts** - Don't use personal accounts
✅ **Principle of Least Privilege** - Grant minimum required permissions
✅ **Regular Rotation** - Update credentials quarterly
✅ **Secure Storage** - Credentials are encrypted at rest
✅ **Document Scope** - Note which systems use which credentials

### Testing Credentials

1. Select credential set
2. Click **Test Credential**
3. Enter test target IP
4. Review test results
5. Troubleshoot if needed

## Creating Discovery Jobs

### Quick Start Discovery

For first-time setup:

1. Navigate to **Discovery → Jobs**
2. Click **Quick Discovery Wizard**
3. Follow the wizard:

**Step 1: Basic Information**
- Job Name: `Initial Full Discovery`
- Description: `Complete infrastructure discovery`

**Step 2: Discovery Scope**
- IP Range: `10.0.0.0/8`
- Exclude ranges: `10.0.0.1-10.0.0.50`

**Step 3: Select Methods**
- ☑ Ping Scan
- ☑ SNMP Discovery
- ☑ WMI Discovery
- ☑ SSH Discovery
- ☑ Cloud Discovery (if applicable)

**Step 4: Assign Credentials**
- Windows: Select credential set
- Linux: Select credential set  
- SNMP: Select credential set

**Step 5: Schedule**
- Run immediately: Yes
- Recurring: Weekly, Sunday 2:00 AM

**Step 6: Review and Launch**
- Review settings
- Click **Start Discovery**

### Advanced Discovery Job Configuration

For more control:

```yaml
Discovery Job: Production Environment
  Scope:
    IP Ranges: 10.0.0.0/16
    Excluded IPs: 10.0.0.1-10.0.0.100
    DNS Zones: corp.example.com
  
  Methods:
    ICMP Ping:
      Enabled: Yes
      Timeout: 5 seconds
    
    SNMP:
      Enabled: Yes
      Versions: v2c, v3
      Port: 161
      Timeout: 10 seconds
      Retries: 2
    
    WMI:
      Enabled: Yes
      Namespace: root\cimv2
      Timeout: 30 seconds
    
    SSH:
      Enabled: Yes
      Port: 22
      Timeout: 30 seconds
  
  Performance:
    Threads: 100
    Batch Size: 500
    Rate Limiting: 100 devices/min
  
  Data Collection:
    Hardware Inventory: Yes
    Software Inventory: Yes
    Running Services: Yes
    Network Connections: Yes
    Relationship Discovery: Yes
    Performance Metrics: No
```

### Discovery Filters

Apply filters to focus discovery:

**Device Type Filters:**
- Only discover servers
- Exclude printers
- Include only specific OS types

**Port-Based Filtering:**
```javascript
if (port_22_open) {
  attempt_ssh_discovery();
}
if (port_161_open) {
  attempt_snmp_discovery();
}
```

## Scheduling and Automation

### Discovery Schedule Types

**1. One-Time Discovery**
- Runs once immediately or at scheduled time
- Use for initial discovery or ad-hoc scans

**2. Recurring Full Discovery**
- Complete scan of all targets
- Recommended: Weekly or bi-weekly
- Captures new devices and all changes

**3. Recurring Incremental Discovery**
- Scans only known devices
- Recommended: Daily
- Updates existing CI data

**4. Continuous Discovery**
- Real-time discovery via agents or network monitoring
- Use for dynamic environments

### Scheduling Best Practices

```
Recommended Schedule for 10K+ Environment:

Sunday 2:00 AM    - Full Discovery (all networks)
Monday-Friday 2:00 AM - Incremental Discovery
Saturday 2:00 AM  - Database Discovery
Daily 6:00 PM     - Cloud Discovery (AWS/Azure)
```

**Considerations:**
- Schedule during low-usage periods
- Stagger multiple jobs to avoid network congestion
- Allow sufficient time for job completion
- Monitor and adjust based on performance

### Automated Actions

Configure post-discovery automation:

1. **Auto-Approve New CIs**
   - Automatically add discovered devices to CMDB
   - Or require manual approval

2. **Relationship Building**
   - Auto-create relationships based on discovery data
   - Link applications to servers
   - Map network connections

3. **Alerting**
   - Alert on new devices discovered
   - Notify on discovery failures
   - Report significant changes

4. **Integration Triggers**
   - Update ITSM with new CIs
   - Sync to ServiceNow
   - Trigger security scans

## Monitoring Discovery

### Discovery Dashboard

Access the dashboard at **Discovery → Dashboard**

**Key Metrics:**
- **Devices Discovered** - Total count by type
- **Discovery Success Rate** - Percentage of successful scans
- **Failed Discoveries** - Count and reasons
- **Discovery Duration** - Time taken per job
- **Credential Issues** - Authentication failures

### Job Monitoring

View active and completed jobs:

1. Navigate to **Discovery → Job History**
2. Filter by status: Running, Completed, Failed
3. Click job for details

**Job Details Include:**
- Start and end time
- Devices scanned
- Devices discovered
- Success/failure breakdown
- Error logs
- Discovered CIs

### Discovery Logs

Access detailed logs:

```
Log Location: Discovery → Logs → Discovery Logs

Log Levels:
- INFO: General discovery progress
- WARNING: Potential issues (timeouts, etc.)
- ERROR: Discovery failures
- DEBUG: Detailed technical information
```

**Common Log Entries:**
```
[INFO] Discovery job started: PROD-DAILY-001
[INFO] Scanning IP range 10.0.0.0/24
[INFO] Device discovered: 10.0.1.50 (Windows Server 2019)
[WARNING] Credential failed for 10.0.1.75 (Invalid username/password)
[ERROR] Connection timeout for 10.0.1.100
[INFO] Discovery job completed: 523 devices scanned, 519 successful
```

### Troubleshooting Discovery Issues

**Issue: Low Success Rate**

Possible causes and solutions:

1. **Incorrect Credentials**
   - Test credentials manually
   - Verify account permissions
   - Check for account lockouts

2. **Network Connectivity**
   - Verify firewall rules
   - Test connectivity with ping
   - Check routing tables

3. **Timeout Settings Too Low**
   - Increase timeout values
   - Reduce concurrent threads
   - Consider network latency

4. **Target System Configuration**
   - Verify WMI service running (Windows)
   - Confirm SSH enabled (Linux)
   - Check SNMP configuration (Network devices)

**Issue: Slow Discovery Performance**

Solutions:
- Increase discovery appliance resources
- Optimize thread count
- Implement network segmentation
- Schedule during off-peak hours
- Use incremental vs full discovery

**Issue: Missing Data**

Solutions:
- Verify credential permissions
- Check discovery scope configuration
- Enable verbose logging
- Review data collection settings

## Advanced Topics

### Custom Discovery Scripts

Extend discovery with custom scripts:

```python
# Example: Custom application discovery
import virima_api

def discover_custom_app(ip_address):
    # Your custom logic here
    app_data = {
        'name': 'Custom App',
        'version': '2.1.0',
        'vendor': 'Your Company',
        'install_path': '/opt/custom-app'
    }
    
    # Submit to Virima
    virima_api.create_ci('Application', app_data)
```

### API-Based Discovery

Use Virima API for custom integrations:

```bash
# Trigger discovery job via API
curl -X POST https://virima.example.com/api/v2/discovery/jobs/run \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "job_id": "PROD-DAILY-001",
    "scope": {
      "ip_ranges": ["10.0.0.0/24"]
    }
  }'
```

### Multi-Tenant Discovery

For managed service providers:

- Create separate discovery zones per customer
- Use customer-specific credentials
- Isolate discovered data by tenant
- Customize discovery schedules per customer

## Summary

Effective IT Discovery requires:
- ✅ Proper network and credential configuration
- ✅ Well-designed discovery zones and jobs
- ✅ Appropriate scheduling for your environment
- ✅ Regular monitoring and optimization
- ✅ Integration with CMDB and other modules

### Quick Reference

| Task | Navigation Path |
|------|----------------|
| Create Discovery Job | Discovery → Jobs → Create |
| Manage Credentials | Discovery → Credentials |
| View Discovery History | Discovery → Job History |
| Configure Appliance | Admin → Discovery Appliances |
| Access Logs | Discovery → Logs |

## Next Steps

1. ✅ Complete initial discovery setup
2. ✅ Run your first discovery job
3. ✅ Review and validate discovered CIs
4. ✅ Configure automated schedules
5. ✅ Integrate with CMDB
6. ✅ Set up monitoring and alerts

## Additional Resources

- [CMDB Configuration Guide](/kb/cmdb-configuration-guide)
- [Credential Management Best Practices](/kb/credential-management)
- [Network Discovery Optimization](/kb/network-discovery-optimization)
- [Discovery API Reference](/api/discovery)
- [Video Tutorial: Discovery Setup](https://virima.com/videos/discovery-setup)

---

**Need Help?** Contact Virima Support at support@virima.com

*Last Updated: November 28, 2024 | Article ID: KB002*
